{% extends 'dreams/base.html' %}
{% load static %}

{% block title %} - 情緒儀表板{% endblock %}

{% block content %}
<style>
    /* 整體深色科技感背景 */
    body {
        background-color: #1a1a2e; /* 深藍紫色 */
        color: #e0e0e0; /* 淺灰色文字 */
        font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif; /* 現代科技字體 */
        animation: fadeInBackground 1s ease-out;
    }

    @keyframes fadeInBackground {
        from { background-color: #0d0d1a; }
        to { background-color: #1a1a2e; }
    }

    .page-container {
        background-color: #0f0f1c; /* 更深的卡片背景，與 body 區隔 */
        border-radius: 1.5rem; /* 圓角更大 */
        padding: 3rem;
        box-shadow: 0 0 30px rgba(0, 255, 255, 0.2), 0 0 15px rgba(0, 255, 255, 0.1); /* 科技感光暈效果 */
        border: 1px solid rgba(0, 255, 255, 0.3); /* 細微邊框 */
        position: relative;
        overflow: hidden; /* 隱藏超出邊界的動畫效果 */
    }

    /* 頁面標題和副標題 */
    .page-header h1 {
        color: #00bcd4; /* 青藍色，科技感主色 */
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.7); /* 發光文字 */
        font-weight: 700;
        letter-spacing: 0.05em;
        animation: pulseText 2s infinite alternate;
    }

    .page-header p {
        color: #8899a6; /* 柔和的淺藍灰色 */
        font-style: italic;
    }

    @keyframes pulseText {
        0% { text-shadow: 0 0 10px rgba(0, 255, 255, 0.7); }
        100% { text-shadow: 0 0 15px rgba(0, 255, 255, 0.9), 0 0 5px rgba(0, 255, 255, 0.5); }
    }

    /* 圖標顏色 */
    .dream-icon i {
        color: #00bcd4; /* 與標題同色 */
        text-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
    }

    /* 卡片通用樣式 */
    .dashboard-card {
        background-color: #16213e; /* 較深的卡片背景 */
        border: 1px solid rgba(0, 255, 255, 0.2);
        border-radius: 1rem;
        padding: 1.5rem;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
        transition: all 0.3s ease-in-out;
        position: relative;
        overflow: hidden;
        margin-bottom: 1.5rem; /* 增加卡片間距 */
    }

    .dashboard-card:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 0 25px rgba(0, 255, 255, 0.3), 0 0 10px rgba(0, 255, 255, 0.15);
        border-color: rgba(0, 255, 255, 0.5);
    }

    /* 卡片標題 */
    .dashboard-card .card-title {
        color: #00bcd4; /* 青藍色 */
        font-weight: 600;
        border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        padding-bottom: 0.75rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
    }
    .dashboard-card .card-title i {
        margin-right: 0.75rem;
        color: #e91e63; /* 點綴色 */
    }

    /* 內容文字 */
    .dashboard-card .card-text {
        color: #c0c0c0;
        line-height: 1.8;
    }

    /* 連結和按鈕 */
    .dashboard-card a {
        color: #00bcd4;
        text-decoration: none;
        transition: color 0.3s;
    }
    .dashboard-card a:hover {
        color: #e91e63;
        text-decoration: underline;
    }

    .btn-outline-info-glow {
        color: #00bcd4;
        border-color: #00bcd4;
        background-color: transparent;
        transition: all 0.3s ease-in-out;
        box-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
    }
    .btn-outline-info-glow:hover {
        color: #1a1a2e;
        background-color: #00bcd4;
        border-color: #00bcd4;
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.7);
        transform: translateY(-2px);
    }

    /* 特殊區塊：情緒視覺化 */
    .emotion-display {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 200px;
        background: linear-gradient(45deg, #2a003f, #0f0f1c); /* 漸層背景 */
        border: 2px dashed rgba(0, 255, 255, 0.4); /* 虛線邊框 */
        border-radius: 1rem;
        padding: 2rem;
        text-align: center;
        box-shadow: inset 0 0 15px rgba(0, 255, 255, 0.2);
    }
    .emotion-display .current-emotion {
        font-size: 3rem;
        font-weight: bold;
        color: #e91e63; /* 突出情緒字眼 */
        text-shadow: 0 0 15px #e91e63;
        margin-bottom: 1rem;
        animation: glowingEmotion 3s infinite alternate;
    }
    .emotion-display .emotion-description {
        color: #b0b0b0;
        font-size: 1.1rem;
    }

    @keyframes glowingEmotion {
        0% { text-shadow: 0 0 10px #e91e63; }
        100% { text-shadow: 0 0 20px #e91e63, 0 0 10px rgba(233, 30, 99, 0.7); }
    }

    /* 圓形進度條/儀表板 */
    .circular-progress-container {
        position: relative;
        width: 150px;
        height: 150px;
        margin: 2rem auto;
    }
    .circular-progress-background, .circular-progress-fill {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
    }
    .circular-progress-background {
        border: 10px solid rgba(0, 255, 255, 0.1);
    }
    .circular-progress-fill {
        border: 10px solid transparent;
        border-top-color: #e91e63;
        border-right-color: #00bcd4;
        border-bottom-color: #e91e63;
        border-left-color: #00bcd4;
        transform: rotate(45deg); /* 起始旋轉 */
        animation: rotateProgress 5s infinite linear;
    }
    .circular-progress-value {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        font-weight: bold;
        color: #00bcd4;
        text-shadow: 0 0 8px rgba(0, 255, 255, 0.8);
    }

    @keyframes rotateProgress {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* 夢境分析結果區塊 */
    .analysis-results {
        background-color: #1a1a2e; /* 與 body 接近，增加深邃感 */
        border: 1px solid rgba(0, 255, 255, 0.3);
        border-radius: 0.8rem;
        padding: 1.5rem;
        margin-top: 1.5rem;
    }
    .analysis-results h6 {
        color: #00bcd4;
        font-weight: 600;
        margin-bottom: 1rem;
    }
    .analysis-item {
        margin-bottom: 0.8rem;
        padding-bottom: 0.8rem;
        border-bottom: 1px dashed rgba(0, 255, 255, 0.1);
        display: flex;
        align-items: flex-start;
    }
    .analysis-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }
    .analysis-item i {
        color: #e91e63;
        margin-right: 0.75rem;
        font-size: 1.2em;
        line-height: 1.5; /* 與文字對齊 */
    }
    .analysis-item span {
        flex-grow: 1;
        color: #c0c0c0;
    }

    /* 動畫效果 */
    .fade-in {
        opacity: 0;
        animation: fadeIn 1s ease-out forwards;
    }
    .slide-in-left {
        opacity: 0;
        transform: translateX(-50px);
        animation: slideInLeft 0.8s ease-out forwards;
    }
    .slide-in-right {
        opacity: 0;
        transform: translateX(50px);
        animation: slideInRight 0.8s ease-out forwards;
    }
    .scale-in {
        opacity: 0;
        transform: scale(0.8);
        animation: scaleIn 0.8s ease-out forwards;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    @keyframes slideInLeft {
        from { transform: translateX(-50px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideInRight {
        from { transform: translateX(50px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    @keyframes scaleIn {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }
</style>

<div class="container mt-5">
    <div class="page-header text-center mb-5 fade-in">
        <div class="dream-icon mb-3">
            <i class="fas fa-head-side-brain fa-3x"></i>
        </div>
        <h1 class="fw-bold">情緒探測儀表板</h1>
        <p class="text-muted">深入解析您的夢境情緒頻譜</p>
    </div>

    <div class="container page-container fade-in" style="animation-delay: 0.3s;">
        <div class="row g-4">
            
            <div class="col-lg-6 slide-in-left" style="animation-delay: 0.5s;">
                <div class="dashboard-card h-100">
                    <h5 class="card-title"><i class="fas fa-satellite-dish"></i> 夢境情緒感測</h5>
                    <div class="emotion-display">
                        <div class="circular-progress-container mb-3">
                            <div class="circular-progress-background"></div>
                            <div class="circular-progress-fill"></div>
                            <div class="circular-progress-value">75%</div>
                        </div>
                        <h3 class="current-emotion">寧靜</h3>
                        <p class="emotion-description">您的夢境散發著深沉的平靜，暗示著內心的和諧與滿足。這可能是潛意識在引導您走向更深層的自我探索。</p>
                        <button class="btn btn-outline-info-glow mt-3">深度解析</button>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 slide-in-right" style="animation-delay: 0.6s;">
                <div class="dashboard-card h-100 d-flex flex-column justify-content-center align-items-center text-center">
                    <h5 class="card-title"><i class="fas fa-chart-line"></i> 情緒頻譜分析</h5>
                    <p class="card-text mb-4">點擊下方按鈕，查看您的情緒趨勢圖表。</p>
                    <a href="{% url 'emotion_chart' %}" class="btn btn-outline-info-glow mt-auto">
                        <i class="fas fa-eye me-2"></i>查看情緒圖表
                    </a>
                </div>
            </div>

            <div class="col-md-12 scale-in" style="animation-delay: 0.8s;">
                <div class="dashboard-card h-100">
                    <h5 class="card-title"><i class="fas fa-lightbulb"></i> 情緒里程碑與建議</h5>
                    <p class="card-text mb-3">透過分析您的夢境情緒，我們為您提供以下洞察和實用建議，幫助您更好地理解和平衡內心世界。</p>
                    <div class="analysis-results">
                        <h6><i class="fas fa-compass me-2"></i>本週焦點：</h6>
                        <p class="small mb-2">您的夢境顯示對「未知」的探索慾望正在增強。</p>
                        <h6><i class="fas fa-flask me-2"></i>建議：</h6>
                        <ul>
                            <li class="small">嘗試紀錄更多夢境細節，特別是感覺新奇或令人困惑的部分。</li>
                            <li class="small">白天可接觸新知識或技能，滿足潛意識的求知慾。</li>
                            <li class="small">進行冥想或放鬆練習，平衡探索慾望可能帶來的不安。</li>
                        </ul>
                    </div>
                    <button class="btn btn-outline-info-glow btn-sm mt-3">更多心靈指引</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}