{% extends 'dreams/base.html' %}

{% block title %} - 夢境歷史{% endblock %}

{% block content %}
<div class="page-header">
    <div class="dream-icon">
        <i class="fas fa-book"></i>
    </div>
    <h1>夢境分析數據</h1>
    <p class="text-muted">回顧您過去的夢境分析數據</p>
</div>

<!-- 夢境儀表板 -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>夢境儀表板</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>   
     <!-- 關鍵字長條圖 -->
  <div class="row">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body">
              <h5 class="card-title">個人關鍵字紀錄</h5>
              <canvas id="keywordBarChart" style="max-height: 400px;"></canvas>
          </div>
        </div>
    </div>

    <!-- 全球夢境趨勢分析 -->
    <div class="col-lg-6">
      <div class="card">
          <div class="card-body">
              <h5 class="card-title">熱門夢境關鍵字</h5>
              <canvas id="globalTrendsChart" style="max-height: 400px;"></canvas>
          </div>
      </div>
    </div>
  </div>

  <!-- 夢境情緒趨勢圖 -->
  <div class="row">
      <div class="col-lg-6">
          <div class="card">
              <div class="card-body">
                  <h5 class="card-title">快樂情緒趨勢圖</h5>
                  <canvas id="happyChart" style="max-height: 400px;"></canvas>
              </div>
          </div>
      </div>

      <div class="col-lg-6">
          <div class="card">
              <div class="card-body">
                  <h5 class="card-title">焦慮情緒趨勢圖</h5>
                  <canvas id="anxietyChart" style="max-height: 400px;"></canvas>
              </div>
          </div>
      </div>

      <div class="col-lg-6">
          <div class="card">
              <div class="card-body">
                  <h5 class="card-title">恐懼情緒趨勢圖</h5>
                  <canvas id="fearChart" style="max-height: 400px;"></canvas>
              </div>
          </div>
      </div>

      <div class="col-lg-6">
          <div class="card">
              <div class="card-body">
                  <h5 class="card-title">興奮情緒趨勢圖</h5>
                  <canvas id="excitedChart" style="max-height: 400px;"></canvas>
              </div>
          </div>
      </div>

      <div class="col-lg-6">
          <div class="card">
              <div class="card-body">
                  <h5 class="card-title">悲傷情緒趨勢圖</h5>
                  <canvas id="sadChart" style="max-height: 400px;"></canvas>
              </div>
          </div>
      </div>
  </div>


  <script>
      // 夢境情緒趨勢圖設定
      const moodData = {
          labels: ['今天', '1天前', '2天前', '3天前', '4天前', '5天前', '6天前'],
          datasets: [
              {
                  label: '快樂指數',
                  data: [70, 60, 65, 55, 60, 50, 45],
                  borderColor: 'rgba(75, 192, 192, 1)',
                  fill: false,
              },
              {
                  label: '焦慮指數',
                  data: [40, 35, 50, 60, 55, 45, 70],
                  borderColor: 'rgba(255, 99, 132, 1)',
                  fill: false,
              },
              {
                  label: '恐懼指數',
                  data: [30, 40, 50, 45, 50, 35, 30],
                  borderColor: 'rgba(255, 159, 64, 1)',
                  fill: false,
              },
              {
                  label: '興奮指數',
                  data: [60, 50, 55, 65, 60, 70, 75],
                  borderColor: 'rgba(54, 162, 235, 1)',
                  fill: false,
              },
              {
                  label: '悲傷指數',
                  data: [50, 45, 40, 50, 55, 60, 50],
                  borderColor: 'rgba(153, 102, 255, 1)',
                  fill: false,
              }
          ]
      };

      const chartOptions = {
          responsive: true,
          scales: {
              y: {
                  beginAtZero: true,
                  max: 100
              }
          }
      };

      // 顯示各種情緒的圖表
      const ctxHappy = document.getElementById('happyChart').getContext('2d');
      const happyChart = new Chart(ctxHappy, {
          type: 'line',
          data: {
              labels: moodData.labels,
              datasets: [moodData.datasets[0]] // 快樂指數
          },
          options: chartOptions
      });

      const ctxAnxiety = document.getElementById('anxietyChart').getContext('2d');
      const anxietyChart = new Chart(ctxAnxiety, {
          type: 'line',
          data: {
              labels: moodData.labels,
              datasets: [moodData.datasets[1]] // 焦慮指數
          },
          options: chartOptions
      });

      const ctxFear = document.getElementById('fearChart').getContext('2d');
      const fearChart = new Chart(ctxFear, {
          type: 'line',
          data: {
              labels: moodData.labels,
              datasets: [moodData.datasets[2]] // 恐懼指數
          },
          options: chartOptions
      });

      const ctxExcited = document.getElementById('excitedChart').getContext('2d');
      const excitedChart = new Chart(ctxExcited, {
          type: 'line',
          data: {
              labels: moodData.labels,
              datasets: [moodData.datasets[3]] // 興奮指數
          },
          options: chartOptions
      });

      const ctxSad = document.getElementById('sadChart').getContext('2d');
      const sadChart = new Chart(ctxSad, {
          type: 'line',
          data: {
              labels: moodData.labels,
              datasets: [moodData.datasets[4]] // 悲傷指數
          },
          options: chartOptions
      });

      // 關鍵字長條圖設定
      const keywordData = [
          { text: '焦慮', weight: 15 },
          { text: '變化', weight: 10 },
          { text: '飛行', weight: 20 },
          { text: '蛇', weight: 12 },
          { text: '快樂', weight: 18 },
          { text: '失落', weight: 8 },
          { text: '自由', weight: 25 }
      ];

      const ctxKeyword = document.getElementById('keywordBarChart').getContext('2d');
      const keywordBarChart = new Chart(ctxKeyword, {
          type: 'bar',
          data: {
              labels: keywordData.map(item => item.text),
              datasets: [{
                  label: '關鍵字權重',
                  data: keywordData.map(item => item.weight),
                  backgroundColor: 'rgba(247, 164, 87, 0.2)',
                  borderColor: 'rgb(255, 175, 78)',
                  borderWidth: 1
              }]
          },
          options: {
              responsive: true,
              scales: {
                  y: {
                      beginAtZero: true
                  }
              }
          }
      });

      // 全球夢境趨勢長條圖設定
      const globalTrendsData = [
          { text: '靈體', percentage: 45 },
          { text: '墜落', percentage: 32 },
          { text: '死亡', percentage: 25 },
          { text: '災難', percentage: 15 },
          { text: '追殺', percentage: 50 }
      ];

      const ctxGlobalTrends = document.getElementById('globalTrendsChart').getContext('2d');
      const globalTrendsChart = new Chart(ctxGlobalTrends, {
          type: 'bar',
          data: {
              labels: globalTrendsData.map(item => item.text),
              datasets: [{
                  label: '夢境關鍵字比例',
                  data: globalTrendsData.map(item => item.percentage),
                  backgroundColor: 'rgba(54, 162, 235, 0.2)',
                  borderColor: 'rgba(54, 162, 235, 1)',
                  borderWidth: 1
              }]
          },
          options: {
              responsive: true,
              scales: {
                  y: {
                      beginAtZero: true,
                      max: 100
                  }
              }
          }
      });
  </script>
</body>
</html>


<script>
    // 簡單的搜尋功能
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('searchDreams');
        if (searchInput) {
            searchInput.addEventListener('keyup', function() {
                const searchText = this.value.toLowerCase();
                const dreamItems = document.querySelectorAll('.dream-item');
                
                dreamItems.forEach(item => {
                    const content = item.querySelector('.dream-content').textContent.toLowerCase();
                    if (content.includes(searchText)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        }
    });
</script>
{% endblock %}

</html>
  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>DreamEcho AI</span></strong>. All Rights Reserved
    </div>
    <div class="credits">
      <!-- All the links in the footer should remain intact. -->
      <!-- You can delete the links only if you purchased the pro version. -->
      <!-- Licensing information: https://bootstrapmade.com/license/ -->
      <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/ -->
      Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/wordcloud2.js"></script>
  
</body>

</html>